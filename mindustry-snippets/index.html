<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mindustry Code Snippets</title>
  <style>
    body {
      display: grid;
      margin: auto;
      max-width: 60ch;
    }

    * {
      font-size: large;
      font-family: 'Courier New', Courier, monospace;
    }

    #settings {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    header {
      text-align: center;
      margin: 1ch;
      font-size: larger;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <header>Mindustry Snippet Generator</header>
  <textarea name="output" id="output" cols="60" rows="8" spellcheck="false"></textarea>
  <section id="settings">
    <label for="material">Material: </label>
    <select id="material">
      <option value="copper">Copper</option>
      <option value="lead">Lead</option>
      <option value="metaglass">Metaglass</option>
      <option value="graphite">Graphite</option>
      <option value="sand">Sand</option>
      <option value="coal">Coal</option>
      <option value="titanium">Titanium</option>
      <option value="thorium">Thorium</option>
      <option value="scrap">Scrap</option>
      <option value="silicon">Silicon</option>
      <option value="plastanium">Plastanium</option>
      <option value="surge-alloy">Surge Alloy</option>
      <option value="phase-fabric">Phase Fabric</option>
      <option value="spore-pod">Spore Pod</option>
      <option value="blast-compound">Blast Compound</option>
      <option value="pyratite">Pyratite</option>
    </select>
    <label for="material-count">Material count:</label>
    <input id="material-count" type="number" value=20900 min="0" max="21000">
    <label for="machine">Machine:</label>
    <select id="machine">
      <option value="conveyor">Conveyor</option>
      <option value="smelter">Silicon/Surge Smelter</option>
      <option value="crucible">Crucible</option>
      <option value="kiln">Kiln</option>
      <option value="press">Graphite/Spore Press</option>
      <option value="mixer">Cryofluid/Pyratite/Blast Mixer</option>
      <option value="weaver">Phase Weaver</option>
      <option value="compressor">Plastanium Compressor</option>
      <option value="melter">Melter</option>
      <option value="separator">Separator</option>
      <option value="disassembler">Disassembler</option>
      <option value="pulverizer">Pulverizer</option>
      <option value="incinerator">Incinerator</option>
      <option value="centrifuge">Coal Centrifuge</option>
    </select>
    <label></label>
    <input id="copy" type="button" value="Copy to clipboard">
  </section>
  <script type="module">
    const [material, count, machine, output] =
      ['material', 'material-count', 'machine', 'output'].map(sel => document.getElementById(sel))

    function inputChanged() {
      const selected = material.selectedOptions[0]
      output.value = `sensor ${selected.value} nucleus1 @${selected.value}
print "${selected.innerText}: "
print ${selected.value}
jump 6 lessThanEq ${selected.value} ${count.value}
print "\\nDeactivating ${machine.value}"
control enabled ${machine.value}1 0 0 0 0
printflush message1`
    }
    [material, count, machine].forEach(el => { el.addEventListener('change', inputChanged) })
    inputChanged()

    document.getElementById('copy').addEventListener('click', () => {
      navigator.clipboard.writeText(output.value)
    })
    material.focus()
  </script>
</body>

</html>
